webpackJsonp([3],{171:function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{_i_book:e.bookinfoReducer}}function s(e){return{actions:Object(u.b)(h,e)}}Object.defineProperty(t,"__esModule",{value:!0});var c=r(0),l=r.n(c),u=r(12),p=r(54),f=r(55),d=r(184),h=r(61),b=r(56),y=r(1),v=r.n(y),g=r(53),m=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),A=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={url:""},r}return a(t,e),m(t,[{key:"componentWillMount",value:function(){var e=this,t=void 0;try{t=this.context.router.route.location.state.url}catch(e){t=g.a.get("current").get("url").write()}this.setState({url:t},function(){e.props.actions.initPage({url:t})})}},{key:"render",value:function(){var e=this.props._i_book;return console.log(this.props),e.isFetching?l.a.createElement(b.a,null):l.a.createElement(d.a,{data:e.data})}}]),t}(c.Component);A.contextTypes={router:v.a.object},t.default=Object(f.d)(Object(p.b)(i,s)(A))},173:function(e,t,r){"use strict";function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}r.d(t,"a",function(){return v});var a,i=r(0),s=r.n(i),c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},l=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},u=n(function(e,t){function r(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},o=arguments[3],n=r.root,c=r.rootMargin,l=r.threshold||0;if(e&&t){var u=c?l.toString()+"_"+c:""+l.toString();n&&(u=o?o+"_"+u:null);var p=u?s.get(u):null;p||(p=new IntersectionObserver(a,r),u&&s.set(u,p));var f={callback:t,visible:!1,options:r,observerId:u,observer:u?void 0:p};return i.set(e,f),p.observe(e),f}}function o(e){if(e){var t=i.get(e);if(t){var r=t.observerId,o=t.observer,n=r?s.get(r):o;n&&n.unobserve(e);var a=!1;r&&i.forEach(function(t,o){t&&t.observerId===r&&o!==e&&(a=!0)}),n&&!a&&(n.disconnect(),s.delete(r)),i.delete(e)}}}function n(){s.forEach(function(e){e.disconnect()}),s.clear(),i.clear()}function a(e){e.forEach(function(e){var t=e.isIntersecting,r=e.intersectionRatio,o=i.get(e.target);if(o&&r>=0){var n=o.options,a=!1;Array.isArray(n.threshold)?a=n.threshold.some(function(e){return o.visible?r>e:r>=e}):void 0!==n.threshold&&(a=o.visible?r>n.threshold:r>=n.threshold),void 0!==t&&(a=a&&t),o.callback&&o.callback(a)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.observe=r,t.unobserve=o,t.destroy=n;var i=new Map,s=new Map;t.default={observe:r,unobserve:o,destroy:n}}),p=o(u),f={default:p,__moduleExports:u,observe:u.observe,unobserve:u.unobserve,destroy:u.destroy},d=f&&p||f,h=o(n(function(e,t){function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s.a),i=function(e){function t(){var e,o,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=n=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={inView:!1},n.node=null,n.handleNode=function(e){n.node&&(0,d.unobserve)(n.node),n.node=e,n.observeNode(),n.props.innerRef&&n.props.innerRef(e)},n.handleChange=function(e){n.setState({inView:e}),n.props.onChange&&n.props.onChange(e)},r(n,o)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),n(t,[{key:"componentDidUpdate",value:function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||((0,d.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,d.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,d.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props;(0,d.observe)(this.node,this.handleChange,{threshold:e.threshold,root:e.root,rootMargin:e.rootMargin},e.rootId)}}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.render,n=e.tag,i=function(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"]),s=this.state.inView;return a.createElement(n,o({},i,{ref:this.handleNode}),"function"==typeof r?r(s):null,"function"==typeof t?t(s):t)}}]),t}();i.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=i}));!function(e){e.NotAsked="NotAsked",e.Loading="Loading",e.LoadSuccess="LoadSuccess",e.LoadError="LoadError"}(a||(a={}));var b=function(e){function t(t){var r=e.call(this,t)||this;return r.state={hasBeenInView:!1,imageState:a.NotAsked},r.renderInner=r.renderInner.bind(r),r.renderLazy=r.renderLazy.bind(r),r.onInView=r.onInView.bind(r),r.onLoadSuccess=r.onLoadSuccess.bind(r),r.onLoadError=r.onLoadError.bind(r),r}return function(e,t){function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.onInView=function(e){!0===e&&(this.props.src?(this.setState(function(e,t){return l({},e,{imageState:a.Loading})}),y({src:this.props.src,srcSet:this.props.srcSet,alt:this.props.alt}).then(this.onLoadSuccess).catch(this.onLoadError)):this.setState(function(e,t){return l({},e,{imageState:a.LoadSuccess})}))},t.prototype.onLoadSuccess=function(){this.setState(function(e,t){return l({},e,{imageState:a.LoadSuccess})})},t.prototype.onLoadError=function(){this.setState(function(e,t){return l({},e,{imageState:a.LoadError})})},t.prototype.render=function(){return this.props.loadEagerly?this.renderInner(this.props,{imageState:a.LoadSuccess}):this.renderLazy(this.props,this.state)},t.prototype.renderLazy=function(e,t){return s.a.createElement(h,l({rootMargin:"50px 0px",threshold:.01},e.observerProps,{onChange:this.onInView,triggerOnce:!0}),this.renderInner(e,t))},t.prototype.renderInner=function(e,t){var r=e.src,o=e.srcSet,n=e.alt,a=e.render,i=e.children,c=t.imageState;return s.a.createElement(s.a.Fragment,null,"function"==typeof a?a({src:r,srcSet:o,alt:n,imageState:c}):"function"==typeof i?i({src:r,srcSet:o,alt:n,imageState:c}):null)},t.displayName="LazyImageFull",t}(s.a.Component),y=function(e){var t=e.src,r=e.srcSet,o=e.alt;return new Promise(function(e,n){var a=new Image;r&&(a.srcset=r),o&&(a.alt=o),a.src=t,a.onload=e,a.onerror=n})},v=function(e){var t=e.actual,r=e.placeholder,o=e.loading,n=e.error,i=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&(r[o[n]]=e[o[n]])}return r}(e,["actual","placeholder","loading","error"]);return s.a.createElement(b,l({},i),function(e){var i=e.src,s=e.srcSet,c=e.alt;switch(e.imageState){case a.NotAsked:return!!r&&r({alt:c});case a.Loading:return o?o():!!r&&r({alt:c});case a.LoadSuccess:return t({src:i,alt:c,srcSet:s});case a.LoadError:return n?n():t({src:i,alt:c,srcSet:s})}})};v.displayName="LazyImage"},184:function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r(0),s=r.n(i),c=r(173),l=r(185),u=(r.n(l),r(1)),p=r.n(u),f=r(53),d=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),h=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.search=r.search.bind(r),r}return a(t,e),d(t,[{key:"search",value:function(e){var t=e.currentTarget.attributes["data-url"].value;console.log(t,"bookinfo"),f.a.set("current.chapterurl",t).write(),this.context.router.history.push({pathname:"/chapter",state:{chapterurl:t}})}},{key:"render",value:function(){var e=this,t=this.props.data;return s.a.createElement("div",{className:"page bookinfo"},s.a.createElement("div",{className:"book-img"},s.a.createElement(c.a,{src:t.imgUrl,alt:t.title,placeholder:function(e){var t=e.alt;return s.a.createElement("img",{src:"http://temp.im/754x754",alt:t})},actual:function(e){var t=e.src,r=e.alt;e.srcSet;return s.a.createElement("img",{src:t,alt:r})}})),s.a.createElement("div",{className:"book-intro"},s.a.createElement("h1",{className:"title"},t.title),s.a.createElement("div",{className:"author"},t.author),s.a.createElement("div",{className:"update-time"},t.updatetime),s.a.createElement("div",{className:"newchapter"},t.newchapter),s.a.createElement("div",{className:"intro"},t.intro)),s.a.createElement("div",{className:"book-chapters"},t.chapters.map(function(t,r){return s.a.createElement("p",{key:r,"data-url":t.url,onClick:e.search},t.title)})))}}]),t}(i.Component);h.contextTypes={router:p.a.object},t.a=h},185:function(e,t,r){var o=r(186);"string"===typeof o&&(o=[[e.i,o,""]]);var n={hmr:!1};n.transform=void 0;r(166)(o,n);o.locals&&(e.exports=o.locals)},186:function(e,t,r){t=e.exports=r(165)(!0),t.push([e.i,".bookinfo{display:-ms-flexbox;display:flex;padding:15px 15px 15px 0;-ms-flex-wrap:wrap;flex-wrap:wrap}.bookinfo .book-img{padding-bottom:15px;width:10%}.bookinfo .book-intro{padding-bottom:15px;padding-left:15px;width:90%}.bookinfo .book-chapters{display:-ms-flexbox;display:flex;padding-top:15px;border-top:1px solid #f5f5f5;width:100%;-ms-flex-wrap:wrap;flex-wrap:wrap}.bookinfo .book-chapters p{width:33.333333%;cursor:pointer}","",{version:3,sources:["/Users/pan/coding/myself/novel-react/src/assets/styles/bookinfo.css"],names:[],mappings:"AAAA,UACI,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AAC1B,mBAAoB,AAChB,cAAgB,CACvB,AAED,oBACI,oBAAqB,AACrB,SAAW,CACd,AAED,sBACI,oBAAqB,AACrB,kBAAmB,AACnB,SAAW,CACd,AAED,yBACI,oBAAqB,AACrB,aAAc,AACd,iBAAkB,AAClB,6BAA8B,AAC9B,WAAY,AACZ,mBAAoB,AAChB,cAAgB,CACvB,AAED,2BACI,iBAAkB,AAClB,cAAgB,CACnB",file:"bookinfo.css",sourcesContent:[".bookinfo {\n    display: -ms-flexbox;\n    display: flex;\n    padding: 15px 15px 15px 0;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n\n.bookinfo .book-img {\n    padding-bottom: 15px;\n    width: 10%;\n}\n\n.bookinfo .book-intro {\n    padding-bottom: 15px;\n    padding-left: 15px;\n    width: 90%;\n}\n\n.bookinfo .book-chapters {\n    display: -ms-flexbox;\n    display: flex;\n    padding-top: 15px;\n    border-top: 1px solid #f5f5f5;\n    width: 100%;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n\n.bookinfo .book-chapters p {\n    width: 33.333333%;\n    cursor: pointer;\n}"],sourceRoot:""}])}});
//# sourceMappingURL=3.2a473396.chunk.js.map